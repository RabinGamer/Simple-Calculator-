<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>All-in-One Calculator Hub</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background-color: #f5f5f5;
      color: #333;
      line-height: 1.6;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    header {
      background-color: #2c3e50;
      color: white;
      padding: 2rem 0;
      text-align: center;
      margin-bottom: 2rem;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    h1 {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
    }

    .subtitle {
      font-size: 1.1rem;
      opacity: 0.9;
    }

    .category-section {
      margin-bottom: 3rem;
    }

    .category-title {
      font-size: 1.8rem;
      color: #2c3e50;
      margin-bottom: 1rem;
      padding-bottom: 0.5rem;
      border-bottom: 3px solid #3498db;
    }

    .calculator-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 2rem;
    }

    .calculator-card {
      background: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .calculator-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 20px rgba(0,0,0,0.15);
    }

    .calculator-title {
      font-size: 1.3rem;
      color: #2c3e50;
      margin-bottom: 15px;
      font-weight: 600;
    }

    .calculator-content {
      display: none;
      margin-top: 15px;
    }

    .calculator-content.active {
      display: block;
    }

    .input-group {
      margin-bottom: 15px;
    }

    label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
      color: #555;
    }

    input[type="number"],
    input[type="text"],
    input[type="date"],
    select {
      width: 100%;
      padding: 10px;
      border: 2px solid #ddd;
      border-radius: 5px;
      font-size: 16px;
      transition: border-color 0.3s ease;
    }

    input[type="number"]:focus,
    input[type="text"]:focus,
    input[type="date"]:focus,
    select:focus {
      outline: none;
      border-color: #3498db;
    }

    button {
      background-color: #3498db;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      width: 100%;
      margin-top: 10px;
    }

    button:hover {
      background-color: #2980b9;
    }

    .result {
      margin-top: 15px;
      padding: 15px;
      background-color: #e8f4f8;
      border-radius: 5px;
      font-size: 1.1rem;
      font-weight: 600;
      color: #2c3e50;
      text-align: center;
    }

    .toggle-btn {
      background-color: #27ae60;
      padding: 8px 16px;
      font-size: 14px;
      margin-top: 0;
    }

    .toggle-btn:hover {
      background-color: #229954;
    }

    .calculator-display {
      background-color: #2c3e50;
      color: white;
      padding: 20px;
      border-radius: 5px;
      font-size: 24px;
      text-align: right;
      margin-bottom: 15px;
      min-height: 60px;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      word-wrap: break-word;
      overflow-wrap: break-word;
    }

    .calc-buttons {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
    }

    .calc-btn {
      padding: 20px;
      font-size: 18px;
      margin-top: 0;
    }

    .calc-btn.span-2 {
      grid-column: span 2;
    }

    .calc-btn.operator {
      background-color: #e67e22;
    }

    .calc-btn.operator:hover {
      background-color: #d35400;
    }

    .calc-btn.equals {
      background-color: #27ae60;
    }

    .calc-btn.equals:hover {
      background-color: #229954;
    }

    .calc-btn.clear {
      background-color: #e74c3c;
    }

    .calc-btn.clear:hover {
      background-color: #c0392b;
    }

    @media (max-width: 768px) {
      h1 {
        font-size: 2rem;
      }

      .calculator-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>All-in-One Calculator Hub</h1>
    <p class="subtitle">
      25 Essential Calculators for Every Need
    </p>
  </header>

  <div class="container">
    <!-- Basic Calculators Section -->
    <section class="category-section">
      <h2 class="category-title">1. Basic Calculators (General Use)</h2>
      <div class="calculator-grid">

        <!-- Standard Calculator -->
        <div class="calculator-card">
          <h3 class="calculator-title">Standard Calculator</h3>
          <button class="toggle-btn" onclick="toggleCalculator('standard-calc')">Open Calculator</button>
          <div id="standard-calc" class="calculator-content">
            <div class="calculator-display" id="calc-display">
              0
            </div>
            <div class="calc-buttons">
              <button class="calc-btn clear" onclick="clearCalc()">C</button>
              <button class="calc-btn" onclick="appendToCalc('/')">/</button>
              <button class="calc-btn" onclick="appendToCalc('*')">×</button>
              <button class="calc-btn" onclick="deleteLastCalc()">←</button>

              <button class="calc-btn" onclick="appendToCalc('7')">7</button>
              <button class="calc-btn" onclick="appendToCalc('8')">8</button>
              <button class="calc-btn" onclick="appendToCalc('9')">9</button>
              <button class="calc-btn operator" onclick="appendToCalc('-')">-</button>

              <button class="calc-btn" onclick="appendToCalc('4')">4</button>
              <button class="calc-btn" onclick="appendToCalc('5')">5</button>
              <button class="calc-btn" onclick="appendToCalc('6')">6</button>
              <button class="calc-btn operator" onclick="appendToCalc('+')">+</button>

              <button class="calc-btn" onclick="appendToCalc('1')">1</button>
              <button class="calc-btn" onclick="appendToCalc('2')">2</button>
              <button class="calc-btn" onclick="appendToCalc('3')">3</button>
              <button class="calc-btn equals" onclick="calculateResult()">=</button>

              <button class="calc-btn span-2" onclick="appendToCalc('0')">0</button>
              <button class="calc-btn" onclick="appendToCalc('.')">.</button>
            </div>
          </div>
        </div>

        <!-- Percentage Calculator -->
        <div class="calculator-card">
          <h3 class="calculator-title">Percentage Calculator</h3>
          <button class="toggle-btn" onclick="toggleCalculator('percentage-calc')">Open Calculator</button>
          <div id="percentage-calc" class="calculator-content">
            <div class="input-group">
              <label>Value:</label>
              <input type="number" id="percent-value" placeholder="Enter value">
            </div>
            <div class="input-group">
              <label>Percentage:</label>
              <input type="number" id="percent-rate" placeholder="Enter percentage">
            </div>
            <div class="input-group">
              <label>Operation:</label>
              <select id="percent-operation">
                <option value="of">% of value</option>
                <option value="increase">Increase by %</option>
                <option value="decrease">Decrease by %</option>
                <option value="is">What % is X of Y</option>
              </select>
            </div>
            <button onclick="calculatePercentage()">Calculate</button>
            <div id="percent-result" class="result"></div>
          </div>
        </div>

        <!-- Fraction Calculator -->
        <div class="calculator-card">
          <h3 class="calculator-title">Fraction Calculator</h3>
          <button class="toggle-btn" onclick="toggleCalculator('fraction-calc')">Open Calculator</button>
          <div id="fraction-calc" class="calculator-content">
            <div class="input-group">
              <label>First Fraction:</label>
              <input type="number" id="frac1-num" placeholder="Numerator" style="width: 48%; display: inline-block;">
              <span style="margin: 0 2%;">/</span>
              <input type="number" id="frac1-den" placeholder="Denominator" style="width: 48%; display: inline-block;">
            </div>
            <div class="input-group">
              <label>Operation:</label>
              <select id="frac-operation">
                <option value="add">Add (+)</option>
                <option value="subtract">Subtract (-)</option>
                <option value="multiply">Multiply (×)</option>
                <option value="divide">Divide (÷)</option>
              </select>
            </div>
            <div class="input-group">
              <label>Second Fraction:</label>
              <input type="number" id="frac2-num" placeholder="Numerator" style="width: 48%; display: inline-block;">
              <span style="margin: 0 2%;">/</span>
              <input type="number" id="frac2-den" placeholder="Denominator" style="width: 48%; display: inline-block;">
            </div>
            <button onclick="calculateFraction()">Calculate</button>
            <div id="fraction-result" class="result"></div>
          </div>
        </div>

        <!-- Unit Converter -->
        <div class="calculator-card">
          <h3 class="calculator-title">Unit Converter</h3>
          <button class="toggle-btn" onclick="toggleCalculator('unit-calc')">Open Calculator</button>
          <div id="unit-calc" class="calculator-content">
            <div class="input-group">
              <label>Category:</label>
              <select id="unit-category" onchange="updateUnitOptions()">
                <option value="length">Length</option>
                <option value="weight">Weight</option>
                <option value="temperature">Temperature</option>
                <option value="area">Area</option>
                <option value="volume">Volume</option>
              </select>
            </div>
            <div class="input-group">
              <label>From:</label>
              <input type="number" id="unit-from-value" placeholder="Enter value">
              <select id="unit-from" style="margin-top: 5px;"></select>
            </div>
            <div class="input-group">
              <label>To:</label>
              <select id="unit-to"></select>
            </div>
            <button onclick="convertUnit()">Convert</button>
            <div id="unit-result" class="result"></div>
          </div>
        </div>

        <!-- Age Calculator -->
        <div class="calculator-card">
          <h3 class="calculator-title">Age Calculator</h3>
          <button class="toggle-btn" onclick="toggleCalculator('age-calc')">Open Calculator</button>
          <div id="age-calc" class="calculator-content">
            <div class="input-group">
              <label>Date of Birth:</label>
              <input type="date" id="birth-date">
            </div>
            <div class="input-group">
              <label>Age at Date (optional):</label>
              <input type="date" id="age-at-date">
            </div>
            <button onclick="calculateAge()">Calculate Age</button>
            <div id="age-result" class="result"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Scientific & Math Calculators Section -->
    <section class="category-section">
      <h2 class="category-title">2. Scientific & Math Calculators</h2>
      <div class="calculator-grid">

        <!-- Scientific Calculator -->
        <div class="calculator-card">
          <h3 class="calculator-title">Scientific Calculator</h3>
          <button class="toggle-btn" onclick="toggleCalculator('scientific-calc')">Open Calculator</button>
          <div id="scientific-calc" class="calculator-content">
            <div class="calculator-display" id="sci-display">
              0
            </div>
            <div class="calc-buttons" style="grid-template-columns: repeat(5, 1fr);">
              <button class="calc-btn" onclick="sciCalc('sin')">sin</button>
              <button class="calc-btn" onclick="sciCalc('cos')">cos</button>
              <button class="calc-btn" onclick="sciCalc('tan')">tan</button>
              <button class="calc-btn" onclick="sciCalc('log')">log</button>
              <button class="calc-btn" onclick="sciCalc('ln')">ln
                <button class="calc-btn" onclick="sciCalc('sqrt')">√</button>
                <button class="calc-btn" onclick="sciCalc('pow')">x²</button>
                <button class="calc-btn" onclick="sciCalc('pow3')">x³</button>
                <button class="calc-btn" onclick="sciCalc('pi')">π</button>
                <button class="calc-btn" onclick="sciCalc('e')">e</button>

                <button class="calc-btn clear" onclick="clearSci()">C</button>
                <button class="calc-btn" onclick="appendToSci('(')">(</button>
                <button class="calc-btn" onclick="appendToSci(')')">)</button>
                <button class="calc-btn" onclick="appendToSci('/')">/</button>
                <button class="calc-btn" onclick="deleteSci()">←</button>

                <button class="calc-btn" onclick="appendToSci('7')">7</button>
                <button class="calc-btn" onclick="appendToSci('8')">8</button>
                <button class="calc-btn" onclick="appendToSci('9')">9</button>
                <button class="calc-btn" onclick="appendToSci('*')">×</button>
                <button class="calc-btn" onclick="sciCalc('fact')">x!</button>

                <button class="calc-btn" onclick="appendToSci('4')">4</button>
                <button class="calc-btn" onclick="appendToSci('5')">5</button>
                <button class="calc-btn" onclick="appendToSci('6')">6</button>
                <button class="calc-btn" onclick="appendToSci('-')">-</button>
                <button class="calc-btn" onclick="sciCalc('abs')">|x|</button>

                <button class="calc-btn" onclick="appendToSci('1')">1</button>
                <button class="calc-btn" onclick="appendToSci('2')">2</button>
                <button class="calc-btn" onclick="appendToSci('3')">3</button>
                <button class="calc-btn" onclick="appendToSci('+')">+</button>
                <button class="calc-btn equals" onclick="calculateSci()">=</button>

                <button class="calc-btn span-2" onclick="appendToSci('0')">0</button>
                <button class="calc-btn" onclick="appendToSci('.')">.</button>
                <button class="calc-btn" onclick="sciCalc('neg')">±</button>
              </div>
            </div>
          </div>

          <!-- Equation Solver -->
          <div class="calculator-card">
            <h3 class="calculator-title">Equation Solver</h3>
            <button class="toggle-btn" onclick="toggleCalculator('equation-calc')">Open Calculator</button>
            <div id="equation-calc" class="calculator-content">
              <div class="input-group">
                <label>Equation Type:</label>
                <select id="equation-type" onchange="updateEquationInputs()">
                  <option value="linear">Linear (ax + b = 0)</option>
                  <option value="quadratic">Quadratic (ax² + bx + c = 0)</option>
                </select>
              </div>
              <div id="linear-inputs">
                <div class="input-group">
                  <label>a (coefficient of x):</label>
                  <input type="number" id="linear-a" placeholder="Enter a">
                </div>
                <div class="input-group">
                  <label>b (constant):</label>
                  <input type="number" id="linear-b" placeholder="Enter b">
                </div>
              </div>
              <div id="quadratic-inputs" style="display: none;">
                <div class="input-group">
                  <label>a (coefficient of x²):</label>
                  <input type="number" id="quad-a" placeholder="Enter a">
                </div>
                <div class="input-group">
                  <label>b (coefficient of x):</label>
                  <input type="number" id="quad-b" placeholder="Enter b">
                </div>
                <div class="input-group">
                  <label>c (constant):</label>
                  <input type="number" id="quad-c" placeholder="Enter c">
                </div>
              </div>
              <button onclick="solveEquation()">Solve</button>
              <div id="equation-result" class="result"></div>
            </div>
          </div>

          <!-- Matrix Calculator -->
          <div class="calculator-card">
            <h3 class="calculator-title">Matrix Calculator</h3>
            <button class="toggle-btn" onclick="toggleCalculator('matrix-calc')">Open Calculator</button>
            <div id="matrix-calc" class="calculator-content">
              <div class="input-group">
                <label>Matrix Size:</label>
                <select id="matrix-size" onchange="createMatrixInputs()">
                  <option value="2">2×2</option>
                  <option value="3">3×3</option>
                </select>
              </div>
              <div class="input-group">
                <label>Matrix A:</label>
                <div id="matrix-a-inputs"></div>
              </div>
              <div class="input-group">
                <label>Operation:</label>
                <select id="matrix-operation">
                  <option value="add">Add</option>
                  <option value="subtract">Subtract</option>
                  <option value="multiply">Multiply</option>
                  <option value="determinant">Determinant</option>
                  <option value="inverse">Inverse</option>
                </select>
              </div>
              <div class="input-group" id="matrix-b-group">
                <label>Matrix B:</label>
                <div id="matrix-b-inputs"></div>
              </div>
              <button onclick="calculateMatrix()">Calculate</button>
              <div id="matrix-result" class="result"></div>
            </div>
          </div>

          <!-- Statistics Calculator -->
          <div class="calculator-card">
            <h3 class="calculator-title">Statistics Calculator</h3>
            <button class="toggle-btn" onclick="toggleCalculator('stats-calc')">Open Calculator</button>
            <div id="stats-calc" class="calculator-content">
              <div class="input-group">
                <label>Enter numbers (comma-separated):</label>
                <input type="text" id="stats-numbers" placeholder="e.g., 1, 2, 3, 4, 5">
              </div>
              <button onclick="calculateStats()">Calculate Statistics</button>
              <div id="stats-result" class="result"></div>
            </div>
          </div>

          <!-- Probability & Combinations Calculator -->
          <div class="calculator-card">
            <h3 class="calculator-title">Probability & Combinations</h3>
            <button class="toggle-btn" onclick="toggleCalculator('prob-calc')">Open Calculator</button>
            <div id="prob-calc" class="calculator-content">
              <div class="input-group">
                <label>Type:</label>
                <select id="prob-type">
                  <option value="permutation">Permutation (nPr)</option>
                  <option value="combination">Combination (nCr)</option>
                  <option value="factorial">Factorial (n!)</option>
                </select>
              </div>
              <div class="input-group">
                <label>n (total items):</label>
                <input type="number" id="prob-n" placeholder="Enter n">
              </div>
              <div class="input-group" id="prob-r-group">
                <label>r (items to choose):</label>
                <input type="number" id="prob-r" placeholder="Enter r">
              </div>
              <button onclick="calculateProbability()">Calculate</button>
              <div id="prob-result" class="result"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- Finance & Money Calculators Section -->
      <section class="category-section">
        <h2 class="category-title">3. Finance & Money Calculators</h2>
        <div class="calculator-grid">

          <!-- Loan Calculator -->
          <div class="calculator-card">
            <h3 class="calculator-title">Loan Calculator</h3>
            <button class="toggle-btn" onclick="toggleCalculator('loan-calc')">Open Calculator</button>
            <div id="loan-calc" class="calculator-content">
              <div class="input-group">
                <label>Loan Amount:</label>
                <input type="number" id="loan-amount" placeholder="Enter loan amount">
              </div>
              <div class="input-group">
                <label>Interest Rate (% per year):</label>
                <input type="number" id="loan-rate" placeholder="Enter interest rate">
              </div>
              <div class="input-group">
                <label>Loan Term (years):</label>
                <input type="number" id="loan-term" placeholder="Enter loan term">
              </div>
              <button onclick="calculateLoan()">Calculate EMI</button>
              <div id="loan-result" class="result"></div>
            </div>
          </div>

          <!-- Mortgage Calculator -->
          <div class="calculator-card">
            <h3 class="calculator-title">Mortgage Calculator</h3>
            <button class="toggle-btn" onclick="toggleCalculator('mortgage-calc')">Open Calculator</button>
            <div id="mortgage-calc" class="calculator-content">
              <div class="input-group">
                <label>Home Price:</label>
                <input type="number" id="home-price" placeholder="Enter home price">
              </div>
              <div class="input-group">
                <label>Down Payment (%):</label>
                <input type="number" id="down-payment" placeholder="Enter down payment %">
              </div>
              <div class="input-group">
                <label>Interest Rate (%):</label>
                <input type="number" id="mortgage-rate" placeholder="Enter interest rate">
              </div>
              <div class="input-group">
                <label>Loan Term (years):</label>
                <input type="number" id="mortgage-term" placeholder="Enter loan term">
              </div>
              <button onclick="calculateMortgage()">Calculate</button>
              <div id="mortgage-result" class="result"></div>
            </div>
          </div>

          <!-- Compound Interest Calculator -->
          <div class="calculator-card">
            <h3 class="calculator-title">Compound Interest Calculator</h3>
            <button class="toggle-btn" onclick="toggleCalculator('compound-calc')">Open Calculator</button>
            <div id="compound-calc" class="calculator-content">
              <div class="input-group">
                <label>Principal Amount:</label>
                <input type="number" id="compound-principal" placeholder="Enter principal">
              </div>
              <div class="input-group">
                <label>Interest Rate (% per year):</label>
                <input type="number" id="compound-rate" placeholder="Enter rate">
              </div>
              <div class="input-group">
                <label>Time Period (years):</label>
                <input type="number" id="compound-time" placeholder="Enter time">
              </div>
              <div class="input-group">
                <label>Compounding Frequency:</label>
                <select id="compound-frequency">
                  <option value="1">Annually</option>
                  <option value="2">Semi-annually</option>
                  <option value="4">Quarterly</option>
                  <option value="12">Monthly</option>
                  <option value="365">Daily</option>
                </select>
              </div>
              <button onclick="calculateCompound()">Calculate</button>
              <div id="compound-result" class="result"></div>
            </div>
          </div>

          <!-- Simple Interest Calculator -->
          <div class="calculator-card">
            <h3 class="calculator-title">Simple Interest Calculator</h3>
            <button class="toggle-btn" onclick="toggleCalculator('simple-calc')">Open Calculator</button>
            <div id="simple-calc" class="calculator-content">
              <div class="input-group">
                <label>Principal Amount:</label>
                <input type="number" id="simple-principal" placeholder="Enter principal">
              </div>
              <div class="input-group">
                <label>Interest Rate (% per year):</label>
                <input type="number" id="simple-rate" placeholder="Enter rate">
              </div>
              <div class="input-group">
                <label>Time Period (years):</label>
                <input type="number" id="simple-time" placeholder="Enter time">
              </div>
              <button onclick="calculateSimple()">Calculate</button>
              <div id="simple-result" class="result"></div>
            </div>
          </div>

          <!-- Currency Converter -->
          <div class="calculator-card">
            <h3 class="calculator-title">Currency Converter</h3>
            <button class="toggle-btn" onclick="toggleCalculator('currency-calc')">Open Calculator</button>
            <div id="currency-calc" class="calculator-content">
              <div class="input-group">
                <label>Amount:</label>
                <input type="number" id="currency-amount" placeholder="Enter amount">
              </div>
              <div class="input-group">
                <label>From:</label>
                <select id="currency-from">
                  <option value="USD">USD - US Dollar</option>
                  <option value="EUR">EUR - Euro</option>
                  <option value="GBP">GBP - British Pound</option>
                  <option value="JPY">JPY - Japanese Yen</option>
                  <option value="AUD">AUD - Australian Dollar</option>
                  <option value="CAD">CAD - Canadian Dollar</option>
                  <option value="CHF">CHF - Swiss Franc</option>
                  <option value="CNY">CNY - Chinese Yuan</option>
                  <option value="INR">INR - Indian Rupee</option>
                </select>
              </div>
              <div class="input-group">
                <label>To:</label>
                <select id="currency-to">
                  <option value="EUR">EUR - Euro</option>
                  <option value="USD">USD - US Dollar</option>
                  <option value="GBP">GBP - British Pound</option>
                  <option value="JPY">JPY - Japanese Yen</option>
                  <option value="AUD">AUD - Australian Dollar</option>
                  <option value="CAD">CAD - Canadian Dollar</option>
                  <option value="CHF">CHF - Swiss Franc</option>
                  <option value="CNY">CNY - Chinese Yuan</option>
                  <option value="INR">INR - India
                    <option value="INR">INR - Indian Rupee</option>
                  </select>
                </div>
                <button onclick="convertCurrency()">Convert</button>
                <div id="currency-result" class="result"></div>
                <p style="font-size: 12px; color: #666; margin-top: 10px;">
                  Note: Using sample exchange rates. For real-time rates, integrate with a currency API.
                </p>
              </div>
            </div>
          </div>
        </section>

        <!-- Health & Fitness Calculators Section -->
        <section class="category-section">
          <h2 class="category-title">4. Health & Fitness Calculators</h2>
          <div class="calculator-grid">

            <!-- BMI Calculator -->
            <div class="calculator-card">
              <h3 class="calculator-title">BMI Calculator</h3>
              <button class="toggle-btn" onclick="toggleCalculator('bmi-calc')">Open Calculator</button>
              <div id="bmi-calc" class="calculator-content">
                <div class="input-group">
                  <label>Unit System:</label>
                  <select id="bmi-unit" onchange="updateBMILabels()">
                    <option value="metric">Metric (kg, cm)</option>
                    <option value="imperial">Imperial (lbs, inches)</option>
                  </select>
                </div>
                <div class="input-group">
                  <label id="weight-label">Weight (kg):</label>
                  <input type="number" id="bmi-weight" placeholder="Enter weight">
                </div>
                <div class="input-group">
                  <label id="height-label">Height (cm):</label>
                  <input type="number" id="bmi-height" placeholder="Enter height">
                </div>
                <button onclick="calculateBMI()">Calculate BMI</button>
                <div id="bmi-result" class="result"></div>
              </div>
            </div>

            <!-- BMR Calculator -->
            <div class="calculator-card">
              <h3 class="calculator-title">BMR Calculator</h3>
              <button class="toggle-btn" onclick="toggleCalculator('bmr-calc')">Open Calculator</button>
              <div id="bmr-calc" class="calculator-content">
                <div class="input-group">
                  <label>Gender:</label>
                  <select id="bmr-gender">
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                  </select>
                </div>
                <div class="input-group">
                  <label>Age (years):</label>
                  <input type="number" id="bmr-age" placeholder="Enter age">
                </div>
                <div class="input-group">
                  <label>Weight (kg):</label>
                  <input type="number" id="bmr-weight" placeholder="Enter weight">
                </div>
                <div class="input-group">
                  <label>Height (cm):</label>
                  <input type="number" id="bmr-height" placeholder="Enter height">
                </div>
                <button onclick="calculateBMR()">Calculate BMR</button>
                <div id="bmr-result" class="result"></div>
              </div>
            </div>

            <!-- Calorie Calculator -->
            <div class="calculator-card">
              <h3 class="calculator-title">Calorie Calculator</h3>
              <button class="toggle-btn" onclick="toggleCalculator('calorie-calc')">Open Calculator</button>
              <div id="calorie-calc" class="calculator-content">
                <div class="input-group">
                  <label>Gender:</label>
                  <select id="cal-gender">
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                  </select>
                </div>
                <div class="input-group">
                  <label>Age (years):</label>
                  <input type="number" id="cal-age" placeholder="Enter age">
                </div>
                <div class="input-group">
                  <label>Weight (kg):</label>
                  <input type="number" id="cal-weight" placeholder="Enter weight">
                </div>
                <div class="input-group">
                  <label>Height (cm):</label>
                  <input type="number" id="cal-height" placeholder="Enter height">
                </div>
                <div class="input-group">
                  <label>Activity Level:</label>
                  <select id="cal-activity">
                    <option value="1.2">Sedentary (little or no exercise)</option>
                    <option value="1.375">Lightly active (1-3 days/week)</option>
                    <option value="1.55">Moderately active (3-5 days/week)</option>
                    <option value="1.725">Very active (6-7 days/week)</option>
                    <option value="1.9">Extra active (very hard exercise)</option>
                  </select>
                </div>
                <button onclick="calculateCalories()">Calculate Daily Calories</button>
                <div id="calorie-result" class="result"></div>
              </div>
            </div>

            <!-- Body Fat Calculator -->
            <div class="calculator-card">
              <h3 class="calculator-title">Body Fat Calculator</h3>
              <button class="toggle-btn" onclick="toggleCalculator('bodyfat-calc')">Open Calculator</button>
              <div id="bodyfat-calc" class="calculator-content">
                <div class="input-group">
                  <label>Gender:</label>
                  <select id="bf-gender">
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                  </select>
                </div>
                <div class="input-group">
                  <label>Age (years):</label>
                  <input type="number" id="bf-age" placeholder="Enter age">
                </div>
                <div class="input-group">
                  <label>Weight (kg):</label>
                  <input type="number" id="bf-weight" placeholder="Enter weight">
                </div>
                <div class="input-group">
                  <label>Height (cm):</label>
                  <input type="number" id="bf-height" placeholder="Enter height">
                </div>
                <div class="input-group">
                  <label>Waist (cm):</label>
                  <input type="number" id="bf-waist" placeholder="Enter waist circumference">
                </div>
                <div class="input-group" id="bf-neck-group">
                  <label>Neck (cm):</label>
                  <input type="number" id="bf-neck" placeholder="Enter neck circumference">
                </div>
                <div class="input-group" id="bf-hip-group" style="display: none;">
                  <label>Hip (cm):</label>
                  <input type="number" id="bf-hip" placeholder="Enter hip circumference">
                </div>
                <button onclick="calculateBodyFat()">Calculate Body Fat %</button>
                <div id="bodyfat-result" class="result"></div>
              </div>
            </div>

            <!-- Ideal Weight Calculator -->
            <div class="calculator-card">
              <h3 class="calculator-title">Ideal Weight Calculator</h3>
              <button class="toggle-btn" onclick="toggleCalculator('idealweight-calc')">Open Calculator</button>
              <div id="idealweight-calc" class="calculator-content">
                <div class="input-group">
                  <label>Gender:</label>
                  <select id="iw-gender">
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                  </select>
                </div>
                <div class="input-group">
                  <label>Height (cm):</label>
                  <input type="number" id="iw-height" placeholder="Enter height">
                </div>
                <div class="input-group">
                  <label>Frame Size:</label>
                  <select id="iw-frame">
                    <option value="small">Small</option>
                    <option value="medium">Medium</option>
                    <option value="large">Large</option>
                  </select>
                </div>
                <button onclick="calculateIdealWeight()">Calculate Ideal Weight</button>
                <div id="idealweight-result" class="result"></div>
              </div>
            </div>
          </div>
        </section>

        <!-- Everyday Life & Utility Calculators Section -->
        <section class="category-section">
          <h2 class="category-title">5. Everyday Life & Utility Calculators</h2>
          <div class="calculator-grid">

            <!-- Date Calculator -->
            <div class="calculator-card">
              <h3 class="calculator-title">Date Calculator</h3>
              <button class="toggle-btn" onclick="toggleCalculator('date-calc')">Open Calculator</button>
              <div id="date-calc" class="calculator-content">
                <div class="input-group">
                  <label>Operation:</label>
                  <select id="date-operation" onchange="updateDateInputs()">
                    <option value="difference">Days between dates</option>
                    <option value="add">Add days to date</option>
                    <option value="subtract">Subtract days from date</option>
                  </select>
                </div>
                <div id="date-diff-inputs">
                  <div class="input-group">
                    <label>Start Date:</label>
                    <input type="date" id="date-start">
                  </div>
                  <div class="input-group">
                    <label>End Date:</label>
                    <input type="date" id="date-end">
                  </div>
                </div>
                <div id="date-add-inputs" style="display: none;">
                  <div class="input-group">
                    <label>Start Date:</label>
                    <input type="date" id="date-base">
                  </div>
                  <div class="input-group">
                    <label>Days to add/subtract:</label>
                    <input type="number" id="date-days" placeholder="Enter number of days">
                  </div>
                </div>
                <button onclick="calculateDate()">Calculate</button>
                <div id="date-result" class="result"></div>
              </div>
            </div>

            <!-- Discount Calculator -->
            <div class="calculator-card">
              <h3 class="calculator-title">Discount Calculator</h3>
              <button class="toggle-btn" onclick="toggleCalculator('discount-calc')">Open Calculator</button>
              <div id="discount-calc" class="calculator-content">
                <div class="input-group">
                  <label>Original Price:</label>
                  <input type="number" id="discount-price" placeholder="Enter original price">
                </div>
                <div class="input-group">
                  <label>Discount (%):</label>
                  <input type="number" id="discount-percent" placeholder="Enter discount percentage">
                </div>
                <div class="input-group">
                  <label>Tax (%) - Optional:</label>
                  <input type="number" id="discount-tax" placeholder="Enter tax percentage">
                </div>
                <button onclick="calculateDiscount()">Calculate</button>
                <div id="discount-result" class="result"></div>
              </div>
            </div>

            <!-- Fuel Cost Calculator -->
            <div class="calculator-card">
              <h3 class="calculator-title">Fuel Cost Calculator</h3>
              <button class="toggle-btn" onclick="toggleCalculator('fuel-calc')">Open Calculator</button>
              <div id="fuel-calc" class="calculator-content">
                <div class="input-group">
                  <label>Distance (km):</label>
                  <input type="number" id="fuel-distance" placeholder="Enter distance">
                </div>
                <div class="input-group">
                  <label>Fuel Efficiency (km/liter):</label>
                  <input type="number" id="fuel-efficiency" placeholder="Enter fuel efficiency">
                </div>
                <div class="input-group">
                  <label>Fuel Price (per liter):</label>
                  <input type="number" id="fuel-price" placeholder="Enter fuel price">
                </div>
                <button onclick="calculateFuel()">Calculate Cost</button>
                <div id="fuel-result" class="result"></div>
              </div>
            </div>

            <!-- Time Calculator -->
            <div class="calculator-card">
              <h3 class="calculator-title">Time Calculator</h3>
              <button class="toggle-btn" onclick="toggleCalculator('time-calc')">Open Calculator</button>
              <div id="time-calc" class="calculator-content">
                <div class="input-group">
                  <label>Operation:</label>
                  <select id="time-operation">
                    <option value="add">Add Time</option>
                    <option value="subtract">Subtract Time</option>
                    <option value="difference">Time Difference</option>
                  </select>
                </div>
                <div class="input-group">
                  <label>Time 1:</label>
                  <input type="number" id="time1-hours" placeholder="Hours" style="width: 48%; display: inline-block;">
                  <input type="number" id="time1-minutes" placeholder="Minutes" style="width: 48%; display: inline-block; margin-left: 4%;">
                </div>
                <div class="input-group">
                  <label>Time 2:</label>
                  <input type="number" id="time2-hours" placeholder="Hours" style="width: 48%; display: inline-block;">
                  <input type="number" id="time2-minutes" placeholder="Minutes" style="width: 48%; display: inline-block; margin-left: 4%;">
                </div>
                <button onclick="calculateTime()">Calculate</button>
                <div id="time-result" class="result"></div>
              </div>
            </div>

            <!-- Electricity Bill Calculator -->
            <div class="calculator-card">
              <h3 class="calculator-title">Electricity Bill Calculator</h3>
              <button class="toggle-btn" onclick="toggleCalculator('electricity-calc')">Open Calculator</button>
              <div id="electricity-calc" class="calculator-content">
                <div class="input-group">
                  <label>Power Consumption (Watts):</label>
                  <input type="number" id="elec-watts" placeholder="Enter watts">
                </div>
                <div class="input-group">
                  <label>Hours per Day:</label>
                  <input type="number" id="elec-hours" placeholder="Enter hours">
                </div>
                <div class="input-group">
                  <label>Days per Month:</label>
                  <input type="number" id="elec-days" value="30" placeholder="Enter days">
                </div>
                <div class="input-group">
                  <label>Cost per kWh:</label>
                  <input type="number" id="elec-rate" placeholder="Enter rate">
                </div>
                                        <button onclick="calculateElectricity()">Calculate Bill</button>
                        <div id="electricity-result" class="result"></div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script>
        // Toggle calculator visibility
        function toggleCalculator(calcId) {
            const calc = document.getElementById(calcId);
            const allCalcs = document.querySelectorAll('.calculator-content');
            
            // Close all other calculators
            allCalcs.forEach(c => {
                if (c.id !== calcId) {
                    c.classList.remove('active');
                }
            });
            
            // Toggle current calculator
            calc.classList.toggle('active');
        }

        // Standard Calculator Functions
        let calcDisplay = '0';
        let shouldResetDisplay = false;

        function updateCalcDisplay() {
            document.getElementById('calc-display').textContent = calcDisplay;
        }

        function clearCalc() {
            calcDisplay = '0';
            updateCalcDisplay();
        }

        function appendToCalc(value) {
            if (shouldResetDisplay) {
                calcDisplay = '0';
                shouldResetDisplay = false;
            }
            
            if (calcDisplay === '0' && value !== '.') {
                calcDisplay = value;
            } else {
                calcDisplay += value;
            }
            updateCalcDisplay();
        }

        function deleteLastCalc() {
            if (calcDisplay.length > 1) {
                calcDisplay = calcDisplay.slice(0, -1);
            } else {
                calcDisplay = '0';
            }
            updateCalcDisplay();
        }

        function calculateResult() {
            try {
                calcDisplay = eval(calcDisplay).toString();
                shouldResetDisplay = true;
            } catch (e) {
                calcDisplay = 'Error';
                shouldResetDisplay = true;
            }
            updateCalcDisplay();
        }

        // Percentage Calculator
        function calculatePercentage() {
            const value = parseFloat(document.getElementById('percent-value').value);
            const rate = parseFloat(document.getElementById('percent-rate').value);
            const operation = document.getElementById('percent-operation').value;
            let result;

            if (isNaN(value) || isNaN(rate)) {
                document.getElementById('percent-result').textContent = 'Please enter valid numbers';
                return;
            }

            switch(operation) {
                case 'of':
                    result = (value * rate) / 100;
                    document.getElementById('percent-result').textContent = `${rate}% of ${value} = ${result}`;
                    break;
                case 'increase':
                    result = value + (value * rate / 100);
                    document.getElementById('percent-result').textContent = `${value} increased by ${rate}% = ${result}`;
                    break;
                case 'decrease':
                    result = value - (value * rate / 100);
                    document.getElementById('percent-result').textContent = `${value} decreased by ${rate}% = ${result}`;
                    break;
                case 'is':
                    result = (value / rate) * 100;
                    document.getElementById('percent-result').textContent = `${value} is ${result}% of ${rate}`;
                    break;
            }
        }

        // Fraction Calculator
        function gcd(a, b) {
            return b === 0 ? a : gcd(b, a % b);
        }

        function simplifyFraction(num, den) {
            const divisor = gcd(Math.abs(num), Math.abs(den));
            return { num: num / divisor, den: den / divisor };
        }

        function calculateFraction() {
            const num1 = parseInt(document.getElementById('frac1-num').value);
            const den1 = parseInt(document.getElementById('frac1-den').value);
            const num2 = parseInt(document.getElementById('frac2-num').value);
            const den2 = parseInt(document.getElementById('frac2-den').value);
            const operation = document.getElementById('frac-operation').value;

            if (isNaN(num1) || isNaN(den1) || isNaN(num2) || isNaN(den2) || den1 === 0 || den2 === 0) {
                document.getElementById('fraction-result').textContent = 'Please enter valid fractions';
                return;
            }

            let resultNum, resultDen;

            switch(operation) {
                case 'add':
                    resultNum = num1 * den2 + num2 * den1;
                    resultDen = den1 * den2;
                    break;
                case 'subtract':
                    resultNum = num1 * den2 - num2 * den1;
                    resultDen = den1 * den2;
                    break;
                case 'multiply':
                    resultNum = num1 * num2;
                    resultDen = den1 * den2;
                    break;
                case 'divide':
                    resultNum = num1 * den2;
                    resultDen = den1 * num2;
                    break;
            }

            const simplified = simplifyFraction(resultNum, resultDen);
            const decimal = resultNum / resultDen;
            
            document.getElementById('fraction-result').textContent = 
                `Result: ${simplified.num}/${simplified.den} = ${decimal.toFixed(4)}`;
        }

        // Unit Converter
        const unitConversions = {
            length: {
                units: ['meter', 'kilometer', 'centimeter', 'millimeter', 'mile', 'yard', 'foot', 'inch'],
                toMeter: {
                    meter: 1,
                    kilometer: 1000,
                    centimeter: 0.01,
                    millimeter: 0.001,
                    mile: 1609.344,
                    yard: 0.9144,
                    foot: 0.3048,
                    inch: 0.0254
                }
            },
            weight: {
                units: ['kilogram', 'gram', 'milligram', 'pound', 'ounce', 'ton'],
                toKilogram: {
                    kilogram: 1,
                    gram: 0.001,
                    milligram: 0.000001,
                    pound: 0.453592,
                    ounce: 0.0283495,
                    ton: 1000
                }
            },
            temperature: {
                units: ['celsius', 'fahrenheit', 'kelvin'],
                convert: function(value, from, to) {
                    let celsius;
                    if (from === 'celsius') celsius = value;
                    else if (from === 'fahrenheit') celsius = (value - 32) * 5/9;
                    else celsius = value - 273.15;

                    if (to === 'celsius') return celsius;
                    else if (to === 'fahrenheit') return celsius * 9/5 + 32;
                    else return celsius + 273.15;
                }
            },
            area: {
                units: ['square meter', 'square kilometer', 'square foot', 'square yard', 'acre', 'hectare'],
                toSquareMeter: {
                    'square meter': 1,
                    'square kilometer': 1000000,
                    'square foot': 0.092903,
                    'square yard': 0.836127,
                    'acre': 4046.86,
                    'hectare': 10000
                }
            },
            volume: {
                units: ['liter', 'milliliter', 'cubic meter', 'gallon', 'quart', 'pint', 'cup', 'fluid ounce'],
                toLiter: {
                    liter: 1,
                    milliliter: 0.001,
                    'cubic meter': 1000,
                    gallon: 3.78541,
                    quart: 0.946353,
                    pint: 0.473176,
                    cup: 0.236588,
                    'fluid ounce': 0.0295735
                }
            }
        };

        function updateUnitOptions() {
            const category = document.getElementById('unit-category').value;
            const fromSelect = document.getElementById('unit-from');
            const toSelect = document.getElementById('unit-to');
            
            fromSelect.innerHTML = '';
            toSelect.innerHTML = '';
            
            unitConversions[category].units.forEach(unit => {
                fromSelect.innerHTML += `<option value="${unit}">${unit}</option>`;
                toSelect.innerHTML += `<option value="${unit}">${unit}</option>`;
            });
        }

        function convertUnit() {
            const category = document.getElementById('unit-category').value;
            const value = parseFloat(document.getElementById('unit-from-value').value);
            const from = document.getElementById('unit-from').value;
            const to = document.getElementById('unit-to').value;

            if (isNaN(value)) {
                document.getElementById('unit-result').textContent = 'Please enter a valid number';
                return;
            }

            let result;
            if (category === 'temperature') {
                result = unitConversions.temperature.convert(value, from, to);
            } else {
                const conversions = unitConversions[category];
                const baseUnit = category === 'length' ? 'toMeter' : 
                               category === 'weight' ? 'toKilogram' :
                               category === 'area' ? 'toSquareMeter' : 'toLiter';
                
                const inBase = value * conversions[baseUnit][from];
                result = inBase / conversions[baseUnit][to];
            }

            document.getElementById('unit-result').textContent = 
                `${value} ${from} = ${result.toFixed(6)} ${to}`;
        }

        // Age Calculator
        function calculateAge() {
            const birthDate = new Date(document.getElementById('birth-date').value);
            const ageAtDate = document.getElementById('age-at-date').value ? 
                new Date(document.getElementById('age-at-date').value) : new Date();

            if (!birthDate || birthDate > ageAtDate) {
                document.getElementById('age-result').textContent = 'Please enter valid dates';
                return;
            }

            let years = ageAtDate.getFullYear() - birthDate.getFullYear();
            let months = ageAtDate.getMonth() - birthDate.getMonth();
            let days = ageAtDate.getDate() - birthDate.getDate();

            if (days < 0) {
                months--;
                days += new Date(ageAtDate.getFullYear(), ageAtDate.getMonth(), 0).getDate();
            }

            if (months < 0) {
                years--;
                months += 12;
            }

            const totalDays = Math.floor((ageAtDate - birthDate) / (1000 * 60 * 60 * 24));
            const totalWeeks = Math.floor(totalDays / 7);
            const totalMonths = years * 12 + months;

            document.getElementById('age-result').innerHTML = 
                `Age: ${years} years, ${months} months, ${days} days<br>
                Total: ${totalMonths} months | ${totalWeeks} weeks | ${totalDays} days`;
        }

        // Scientific Calculator Functions
        let sciDisplay = '0';
        let sciShouldReset = false;

        function updateSciDisplay() {
            document.getElementById('sci-display').textContent = sciDisplay;
        }

        function clearSci() {
            sciDisplay = '0';
            updateSciDisplay();
        }

        function appendToSci(value) {
            if (sciShouldReset) {
                sciDisplay = '0';
                sciShouldReset = false;
            }
            
            if (sciDisplay === '0' && value !== '.') {
                sciDisplay = value;
            } else {
                sciDisplay += value;
            }
            updateSciDisplay();
        }

        function deleteSci() {
            if (sciDisplay.length > 1) {
                sciDisplay = sciDisplay.slice(0, -1);
            } else {
                sciDisplay = '0';
            }
            updateSciDisplay();
        }

        function factorial(n) {
            if (n < 0) return NaN;
            if (n === 0 || n === 1) return 1;
            let result = 1;
            for (let i = 2; i <= n; i++) {
                result *= i;
            }
            return result;
        }

        function sciCalc(operation) {
            try {
                const current = parseFloat(sciDisplay);
                let result;

                switch(operation) {
                    case 'sin':
                        result = Math.sin(current * Math.PI / 180);
                        break;
                    case 'cos':
                        result = Math.cos(current * Math.PI / 180);
                        break;
                    case 'tan':
                        result = Math.tan(current * Math.PI / 180);
                        break;
                    case 'log':
                        result = Math.log10(current);
                        break;
                    case 'ln':
                        result = Math.log(current);
                        break;
                    case 'sqrt':
                        result = Math.sqrt(current);
                        break;
                    case 'pow':
                        result = Math.pow(current, 2);
                        break;
                    case 'pow3':
                        result = Math.pow(current, 3);
                        break;
                    case 'pi':
                        sciDisplay = Math.PI.toString();
                        updateSciDisplay();
                        return;
                    case 'e':
                        sciDisplay = Math.E.toString();
                        updateSciDisplay();
                        return;
                    case 'fact':
                        result = factorial(Math.floor(current));
                        break;
                    case 'abs':
                        result = Math.abs(current);
                        break;
                    case 'neg':
                        result = -current;
                        break;
                }

                sciDisplay = result.toString();
                sciShouldReset = true;
                updateSciDisplay();
            } catch (e) {
                sciDisplay = 'Error';
                sciShouldReset = true;
                updateSciDisplay();
            }
        }

        function calculateSci() {
            try {
                sciDisplay = eval(sciDisplay).toString();
                sciShouldReset = true;
            } catch (e) {
                sciDisplay = 'Error';
                sciShouldReset = true;
            }
            updateSciDisplay();
        }

        // Equation Solver
        function updateEquationInputs() {
            const type = document.getElementById('equation-type').value;
            document.getElementById('linear-inputs').style.display = type === 'linear' ? 'block' : 'none';
            document.getElementById('quadratic-inputs').style.display = type === 'quadratic' ? 'block' : 'none';
        }

        function solveEquation() {
            const type = document.getElementById('equation-type').value;
            
            if (type === 'linear') {
                const a = parseFloat(document.getElementById('linear-a').value);
                const b = parseFloat(document.getElementById('linear-b').value);
                
                if (a === 0) {
                    document.getElementById('equation-result').textContent = 'Invalid equation: a cannot be 0';
                    return;
                }
                
                const x = -b / a;
                document.getElementById('equation-result').textContent = `x = ${x.toFixed(4)}`;
            } else {
                const a = parseFloat(document.getElementById('quad-a').value);
                const b = parseFloat(document.getElementById('quad-b').value);
                const c = parseFloat(document.getElementById('quad-c').value);
                                if (a === 0) {
                    document.getElementById('equation-result').textContent = 'Invalid equation: a cannot be 0';
                    return;
                }
                
                const discriminant = b * b - 4 * a * c;
                
                if (discriminant > 0) {
                    const x1 = (-b + Math.sqrt(discriminant)) / (2 * a);
                    const x2 = (-b - Math.sqrt(discriminant)) / (2 * a);
                    document.getElementById('equation-result').textContent = 
                        `Two real solutions: x₁ = ${x1.toFixed(4)}, x₂ = ${x2.toFixed(4)}`;
                } else if (discriminant === 0) {
                    const x = -b / (2 * a);
                    document.getElementById('equation-result').textContent = 
                        `One real solution: x = ${x.toFixed(4)}`;
                } else {
                    const realPart = -b / (2 * a);
                    const imagPart = Math.sqrt(-discriminant) / (2 * a);
                    document.getElementById('equation-result').textContent = 
                        `Complex solutions: x₁ = ${realPart.toFixed(4)} + ${imagPart.toFixed(4)}i, x₂ = ${realPart.toFixed(4)} - ${imagPart.toFixed(4)}i`;
                }
            }
        }

        // Matrix Calculator
        function createMatrixInputs() {
            const size = parseInt(document.getElementById('matrix-size').value);
            const matrixA = document.getElementById('matrix-a-inputs');
            const matrixB = document.getElementById('matrix-b-inputs');
            
            matrixA.innerHTML = '';
            matrixB.innerHTML = '';
            
            for (let i = 0; i < size; i++) {
                const rowA = document.createElement('div');
                const rowB = document.createElement('div');
                
                for (let j = 0; j < size; j++) {
                    const inputA = document.createElement('input');
                    inputA.type = 'number';
                    inputA.id = `a-${i}-${j}`;
                    inputA.style.width = `${90/size}%`;
                    inputA.style.margin = '2px';
                    inputA.placeholder = `a${i+1}${j+1}`;
                    
                    const inputB = document.createElement('input');
                    inputB.type = 'number';
                    inputB.id = `b-${i}-${j}`;
                    inputB.style.width = `${90/size}%`;
                    inputB.style.margin = '2px';
                    inputB.placeholder = `b${i+1}${j+1}`;
                    
                    rowA.appendChild(inputA);
                    rowB.appendChild(inputB);
                }
                
                matrixA.appendChild(rowA);
                matrixB.appendChild(rowB);
            }
            
            updateMatrixOperation();
        }

        function updateMatrixOperation() {
            const operation = document.getElementById('matrix-operation').value;
            const matrixBGroup = document.getElementById('matrix-b-group');
            
            if (operation === 'determinant' || operation === 'inverse') {
                matrixBGroup.style.display = 'none';
            } else {
                matrixBGroup.style.display = 'block';
            }
        }

        function getMatrix(prefix) {
            const size = parseInt(document.getElementById('matrix-size').value);
            const matrix = [];
            
            for (let i = 0; i < size; i++) {
                matrix[i] = [];
                for (let j = 0; j < size; j++) {
                    const value = parseFloat(document.getElementById(`${prefix}-${i}-${j}`).value) || 0;
                    matrix[i][j] = value;
                }
            }
            
            return matrix;
        }

        function matrixDeterminant(matrix) {
            const n = matrix.length;
            
            if (n === 2) {
                return matrix[0][0] * matrix[1][1] - matrix[0][1] * matrix[1][0];
            }
            
            let det = 0;
            for (let j = 0; j < n; j++) {
                const minor = [];
                for (let i = 1; i < n; i++) {
                    minor[i-1] = [];
                    for (let k = 0; k < n; k++) {
                        if (k !== j) {
                            minor[i-1].push(matrix[i][k]);
                        }
                    }
                }
                det += Math.pow(-1, j) * matrix[0][j] * matrixDeterminant(minor);
            }
            
            return det;
        }

        function matrixInverse(matrix) {
            const n = matrix.length;
            const det = matrixDeterminant(matrix);
            
            if (Math.abs(det) < 0.000001) {
                return null; // Matrix is singular
            }
            
            if (n === 2) {
                return [
                    [matrix[1][1] / det, -matrix[0][1] / det],
                    [-matrix[1][0] / det, matrix[0][0] / det]
                ];
            }
            
            // For 3x3 matrices, use adjugate method
            const adjugate = [];
            for (let i = 0; i < n; i++) {
                adjugate[i] = [];
                for (let j = 0; j < n; j++) {
                    const minor = [];
                    for (let mi = 0; mi < n; mi++) {
                        if (mi !== i) {
                            const row = [];
                            for (let mj = 0; mj < n; mj++) {
                                if (mj !== j) {
                                    row.push(matrix[mi][mj]);
                                }
                            }
                            minor.push(row);
                        }
                    }
                    const cofactor = Math.pow(-1, i + j) * matrixDeterminant(minor);
                    adjugate[j][i] = cofactor / det; // Note: transposed
                }
            }
            
            return adjugate;
        }

        function calculateMatrix() {
            const operation = document.getElementById('matrix-operation').value;
            const matrixA = getMatrix('a');
            let result;
            
            switch(operation) {
                case 'add':
                case 'subtract':
                case 'multiply':
                    const matrixB = getMatrix('b');
                    const size = matrixA.length;
                    result = [];
                    
                    if (operation === 'add' || operation === 'subtract') {
                        for (let i = 0; i < size; i++) {
                            result[i] = [];
                            for (let j = 0; j < size; j++) {
                                result[i][j] = operation === 'add' ? 
                                    matrixA[i][j] + matrixB[i][j] : 
                                    matrixA[i][j] - matrixB[i][j];
                            }
                        }
                    } else { // multiply
                        for (let i = 0; i < size; i++) {
                            result[i] = [];
                            for (let j = 0; j < size; j++) {
                                result[i][j] = 0;
                                for (let k = 0; k < size; k++) {
                                    result[i][j] += matrixA[i][k] * matrixB[k][j];
                                }
                            }
                        }
                    }
                    break;
                    
                case 'determinant':
                    const det = matrixDeterminant(matrixA);
                    document.getElementById('matrix-result').textContent = 
                        `Determinant = ${det.toFixed(4)}`;
                    return;
                    
                case 'inverse':
                    result = matrixInverse(matrixA);
                    if (!result) {
                        document.getElementById('matrix-result').textContent = 
                            'Matrix is singular (determinant = 0)';
                        return;
                    }
                    break;
            }
            
            // Display result matrix
            let resultHTML = 'Result:<br>';
            for (let i = 0; i < result.length; i++) {
                resultHTML += '[ ';
                for (let j = 0; j < result[i].length; j++) {
                    resultHTML += result[i][j].toFixed(2) + ' ';
                }
                resultHTML += ']<br>';
            }
            document.getElementById('matrix-result').innerHTML = resultHTML;
        }

        // Statistics Calculator
        function calculateStats() {
            const input = document.getElementById('stats-numbers').value;
            const numbers = input.split(',').map(n => parseFloat(n.trim())).filter(n => !isNaN(n));
            
            if (numbers.length === 0) {
                document.getElementById('stats-result').textContent = 'Please enter valid numbers';
                return;
            }
            
            // Sort for median calculation
            const sorted = [...numbers].sort((a, b) => a - b);
            
            // Mean
            const mean = numbers.reduce((a, b) => a + b, 0) / numbers.length;
            
            // Median
            const mid = Math.floor(sorted.length / 2);
            const median = sorted.length % 2 === 0 ? 
                (sorted[mid - 1] + sorted[mid]) / 2 : sorted[mid];
            
            // Mode
            const frequency = {};
            let maxFreq = 0;
            let modes = [];
            
            numbers.forEach(num => {
                frequency[num] = (frequency[num] || 0) + 1;
                if (frequency[num] > maxFreq) {
                    maxFreq = frequency[num];
                    modes = [num];
                } else if (frequency[num] === maxFreq && !modes.includes(num)) {
                    modes.push(num);
                }
            });
            
            // Standard Deviation
            const variance = numbers.reduce((acc, num) => acc + Math.pow(num - mean, 2), 0) / numbers.length;
            const stdDev = Math.sqrt(variance);
            
            // Range
            const range = Math.max(...numbers) - Math.min(...numbers);
            
            document.getElementById('stats-result').innerHTML = 
                `Count: ${numbers.length}<br>
                Mean: ${mean.toFixed(4)}<br>
                Median: ${median.toFixed(4)}<br>
                Mode: ${modes.join(', ')}<br>
                Standard Deviation: ${stdDev.toFixed(4)}<br>
                Variance: ${variance.toFixed(4)}<br>
                Range: ${range.toFixed(4)}<br>
                Min: ${Math.min(...numbers)}<br>
                Max: ${Math.max(...numbers)}`;
        }

        // Probability Calculator
        function calculateProbability() {
            const type = document.getElementById('prob-type').value;
            const n = parseInt(document.getElementById('prob-n').value);
            const r = parseInt(document.getElementById('prob-r').value);
            
            if (type === 'factorial') {
                if (isNaN(n) || n < 0) {
                    document.getElementById('prob-result').textContent = 'Please enter a valid non-negative integer';
                    return;
                }
                const result = factorial(n);
                document.getElementById('prob-result').textContent = `${n}! = ${result}`;
            } else {
                if (isNaN(n) || isNaN(r) || n < 0 || r < 0 || r > n) {
                    document.getElementById('prob-result').textContent = 'Please enter valid values (0 ≤ r ≤ n)';
                    return;
                }
                
                if (type === 'permutation') {
                    const result = factorial(n) / factorial(n - r);
                    document.getElementById('prob-result').textContent = `P(${n},${r}) = ${result}`;
                } else {
                    const result = factorial(n) / (factorial(r) * factorial(n - r));
                    document.getElementById('prob-result').textContent = `C(${n},${r}) = ${result}`;
                }
            }
        }

        // Financial Calculators

        // Loan Calculator
        function calculateLoan() {
            const principal = parseFloat(document.getElementById('loan-amount').value);
            const annualRate = parseFloat(document.getElementById('loan-rate').value);
            const years = parseFloat(document.getElementById('loan-term').value);
            
            if (isNaN(principal) || isNaN(annualRate) || isNaN(years)) {
                document.getElementById('loan-result').textContent = 'Please enter valid numbers';
                return;
            }
            
            const monthlyRate = annualRate / 100 / 12;
            const months = years * 12;
            
            const emi = principal * monthlyRate * Math.pow(1 + monthlyRate, months) / 
                       (Math.pow(1 + monthlyRate, months) - 1);
            
            const totalPayment = emi * months;
            const totalInterest = totalPayment - principal;
            
            document.getElementById('loan-result').innerHTML = 
                `Monthly EMI: ${emi.toFixed(2)}<br>
                Total Payment: ${totalPayment.toFixed(2)}<br>
                Total Interest: ${totalInterest.toFixed(2)}`;
        }

        // Mortgage Calculator
        function calculateMortgage() {
            const homePrice = parseFloat(document.getElementById('home-price').value);
            const downPaymentPercent = parseFloat(document.getElementById('down-payment').value);
            const annualRate = parseFloat(document.getElementById('mortgage-rate').value);
            const years = parseFloat(document.getElementById('mortgage-term').value);
            
            if (isNaN(homePrice) || isNaN(downPaymentPercent) || isNaN(annualRate) || isNaN(years)) {
                document.getElementById('mortgage-result').textContent = 'Please enter valid numbers';
                return;
            }
            
            const downPayment = homePrice * downPaymentPercent / 100;
            const loanAmount = homePrice - downPayment;
            const monthlyRate = annualRate / 100 / 12;
            const months = years * 12;
            
            const monthlyPayment = loanAmount * monthlyRate * Math.pow(1 + monthlyRate, months) / 
                                  (Math.pow(1 + monthlyRate, months) - 1);
            
            const totalPayment = monthlyPayment * months;
            const totalInterest = totalPayment - loanAmount;
            
            document.getElementById('mortgage-result').innerHTML = 
                `Down Payment: ${downPayment.toFixed(2)}<br>
                Loan Amount: ${loanAmount.toFixed(2)}<br>
                Monthly Payment: ${monthlyPayment.toFixed(2)}<br>
                Total Payment: ${totalPayment.toFixed(2)}<br>
                Total Interest: ${totalInterest.toFixed(2)}`;
        }

        // Compound Interest Calculator
        function calculateCompound() {
            const principal = parseFloat(document.getElementById('compound-principal').value);
            const rate = parseFloat(document.getElementById('compound-rate').value);
            const time = parseFloat(document.getElementById('compound-time').value);
            const frequency = parseFloat(document.getElementById('compound-frequency').value);
            
            if (isNaN(principal) || isNaN(rate) || isNaN(time)) {
                document.getElementById('compound-result').textContent = 'Please enter valid numbers';
                